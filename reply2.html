<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
    <title>Document</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous" />


    <link rel="stylesheet" type="text/css" href="reply.css">

    <script type="module">

        // Firebase SDK 라이브러리 가져오기
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-app.js";
        import { getFirestore } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js";
        import { collection, addDoc } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js";
        import { getDocs } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js";

        // Firebase 구성 정보 설정
        const firebaseConfig = {
        apiKey: "AIzaSyD3qHdXNbDWdQLnDeG-vdWQ8WGVH9a5BvI",
        authDomain: "cheerup-project.firebaseapp.com",
        projectId: "cheerup-project",
        storageBucket: "cheerup-project.appspot.com",
        messagingSenderId: "879504327217",
        appId: "1:879504327217:web:853e50ea6ddeed4dd68b10",
        measurementId: "G-EXBPEFZ3KS"
        };

        // Firebase 인스턴스 초기화
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);


        
        $("#postingbtn").click(async function () {
            let name = $('#name').val();
            let command = $('#command').val();
            
            let doc = { 
                'name': name, 
                'command': command
            };
            
            await addDoc(collection(db, "messages"), doc);

            
            location.href='mainpage.html'

            alert('응원 완료!')


        })

        
    </script>
</head>

<body>
    <div class="wrapper">
        <form action="">
            <h1>응원메시지</h1>

            <div class="input-box">
                <input id="name" type="text" placeholder="이름" required>
                <i class='bx bx-user-check'></i>
            </div>
            <div class="input-box">
                <input id="command" placeholder="응원메시지를 적어주세요" cols="30" rows="10" required></input>
                <i class='bx bx-message-rounded-dots'></i>
            </div>
            <div>

            </div>
            <div>

                <button id="postingbtn" class="btn">등록하기</button>
            </div>
        </form>
        <div class="msg">당신의 작은 응원이 큰 힘이 됩니다.</div>
    </div>


</body>

</html>